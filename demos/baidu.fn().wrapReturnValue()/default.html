<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="description" content="baidu.fn().wrapReturnValue() 示例" />
		<title>baidu.fn().wrapReturnValue()</title>
		<link rel="stylesheet" href="../../demos/public.css" type="text/css" />
		<script type="text/javascript" src="../../demos/tangram2.0-all.js"></script>
		<script type="text/javascript" src="../../demos/public.js"></script>
	</head>
	<body>
		<div class="demo" id="demo">
			<h1 class="ac-h1"><strong>baidu.fn().wrapReturnValue()</strong> 示例</h1>
			<p class="ac-des">
				包装函数的返回值，使其在能按照index指定的方式返回。如果其值为-1，直接返回返回值；如果其值为0，返回"返回值"的包装结果；如果其值大于0，返回第i个位置的参数的包装结果（从1开始计数）
			</p>

			<ul class="ac-ul">
				<li>
					语法: baidu.fn(func).wrapReturnValue(wrapper, mode)
				</li>
				<li>
					参数: {function} wrapper 包装器
				</li>
				<li>
					参数: {Number} mode 包装第几个参数
				</li>
				<li>
					返回: {function} 包装后的函数
				</li>
			</ul>
			<div class="pannel">
				<div class="pannel-title">
					<span>对函数进行集化</span>
				</div>
				<div class="pannel-content">
					<!--DemoViewStart-->
					<div class="pannel-content-part">
						<p id="demo-ins">
							被包装的函数fn为 function(){ return &quot;green&quot;; }
						</p>
						<p>
							<label>选择索引值：</label>
							<select id="select">
								<option value="-1">-1</option>
								<option value="0">0</option>
								<option value="1">1</option>
								<option value="2">2</option>
							</select>
						</p>
						<span class="button" id="demo_btn">执行！</span>
					</div>
					<div class="pannel-show">
						运行结果：<span id="demo_execute_result"></span>
					</div>
					<!--DemoViewEnd-->
				</div>
			</div>
		</div>
		<script>
			// 目标函数
			function doit() {
				return 'orange';
			}
			
			baidu('#demo_btn').on('click', function() {
				
				// 从用户界面获取索引值
				var index = baidu('#select').val();
				
				// 包装函数的返回值
				var fn = baidu.fn(doit).wrapReturnValue(function(color){
					baidu('#demo-ins').css({
						background: color
					});
				}, index);
				var ret = fn('red', 'yellow');
				
				//输出结果
				if(index == -1){
					baidu('#demo_execute_result').html('索引值为1，直接获得返回值: '+ret);
				}else if(index == 0){
					baidu('#demo_execute_result').html('索引值为0，返回"返回值"的包装结果');
				}else{
					baidu('#demo_execute_result').html('索引值为'+index+'，返回第'+index+'个位置的参数的包装结果');
				}
			});
		</script>
	</body>
</html>